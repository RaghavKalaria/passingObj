
pool:
  vmImage: ubuntu-latest

steps:
- task: calculatorPassObj@0
  inputs:
    Number1: 1
    Number2: 2
    Operation: '+'
  name: "calctask1"
  
  
- task: PowerShell@2
  name: "getResult"
  inputs:
    targetType: 'inline'
    script: |
      Write-Host "$(calctask1.outputVar)" 
      $string = '$(calctask1.outputVar)'
      $CharArray = $string.Split(',')
      $resultArray = $CharArray[$CharArray.length-1]
      $resultArray = $resultArray.split(":")
      $resultArray = $resultArray.split('}')
      $result = $resultArray[$resultArray.length -2]
      Write-Host "$(result)"
      "##vso[task.setvariable variable=results]$result"
      
- task: PowerShell@2
  name: "output"
  inputs:
    targetType: 'inline'
    script: |
      Write-Host "$(getResult.results)" 
      


